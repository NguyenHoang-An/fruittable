<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>Quแบฃn lรฝ sแบฃn phแบฉm</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
<h3 class="mb-3">Quแบฃn lรฝ sแบฃn phแบฉm</h3>
<a class="btn btn-success mb-3" th:href="@{/admin/products/create}">+ Thรชm sแบฃn phแบฉm</a>

<table class="table table-bordered align-middle">
    <thead class="table-light">
    <tr>
        <th>แบขnh</th>
        <th>Tรชn</th>
        <th>Giรก</th>
        <th>ฤฦกn vแป</th>
        <th>Danh mแปฅc</th>
        <th>Hiแปn thแป</th>
        <th style="width:180px"></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="p : ${items}">
        <td>
            <img th:if="${p.imageUrl}" th:src="${p.imageUrl}" alt="" style="height:60px">
        </td>
        <td th:text="${p.name}">Tรกo ฤแป Fuji</td>
        <td th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')}">120000</td>
        <td th:text="${p.unit}">kg</td>
        <td th:text="${p.category}">Trรกi cรขy</td>
        <td>
          <span class="badge" th:classappend="${p.enabled} ? 'bg-success' : 'bg-secondary'"
                th:text="${p.enabled} ? 'Bแบญt' : 'Tแบฏt'">Bแบญt</span>
        </td>
        <td>
            <a class="btn btn-sm btn-primary" th:href="@{|/admin/products/${p.id}/edit|}">Sแปญa</a>
            <form th:action="@{|/admin/products/${p.id}/delete|}" method="post" style="display:inline"
                  onsubmit="return confirm('Xoรก sแบฃn phแบฉm nรy?')">
                <button class="btn btn-sm btn-danger" type="submit">Xoรก</button>
            </form>
            <a class="btn btn-sm btn-outline-secondary" th:href="@{|/shop-detail/${p.id}|}" target="_blank">Xem</a>
        </td>
    </tr>
    </tbody>
</table>
<!-- Toast thรดng bรกo -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div th:if="${param.created}" class="toast align-items-center text-bg-success border-0 show" role="alert">
        <div class="d-flex">
            <div class="toast-body">โ Sแบฃn phแบฉm ฤรฃ ฤฦฐแปฃc <strong>thรชm</strong> thรnh cรดng!</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
    <div th:if="${param.updated}" class="toast align-items-center text-bg-info border-0 show" role="alert">
        <div class="d-flex">
            <div class="toast-body">โ๏ธ Sแบฃn phแบฉm ฤรฃ ฤฦฐแปฃc <strong>cแบญp nhแบญt</strong>!</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
    <div th:if="${param.deleted}" class="toast align-items-center text-bg-warning border-0 show" role="alert">
        <div class="d-flex">
            <div class="toast-body">๐๏ธ Sแบฃn phแบฉm ฤรฃ ฤฦฐแปฃc <strong>xรณa</strong>!</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>
</div>

<script src="/js/bootstrap.bundle.min.js"></script>
<script>
    const toastElList = document.querySelectorAll('.toast');
    toastElList.forEach(toastEl => {
      const toast = new bootstrap.Toast(toastEl, { delay: 3000 });
      toast.show();
    });
</script>
</body>
</html>
